/* src/styles/global.css */

/* ── IMPORTS ────────────────────────────────────────────────────────────── */
@import "./tokens.css";
@import "./themes/default.css";
/* Tenants (activan HEX si existen) */
@import "./themes/tenant-single-hex.css";
@import "./themes/tenant-multicolor-hex.css";

/* Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Reset / normalización ligera ───────────────────────────────────────── */
*,
*::before,
*::after { box-sizing: border-box; }
html, body { height: 100%; }

/* Fondo 100% plano (sin gradientes) */
html, body { background: var(--color-bg); }

body {
  margin: 0;
  color: var(--color-fg);
  font-family: var(--font-sans);
  font-size: var(--text-base);
  line-height: 1.55;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overscroll-behavior-y: contain;
  position: relative;
  z-index: 0;
}

/* ── Layout base (container con gutters por breakpoint) ─────────────────── */
:root {
  --_gutter-sm: var(--container-pad-sm, var(--container-pad, 16px));
  --_gutter-md: var(--container-pad-md, var(--container-pad, 24px));
  --_gutter-lg: var(--container-pad-lg, var(--container-pad, 32px));

  /* Botones */
  --btn-h: 2.75rem; --btn-pad-x: 1.125rem; --btn-radius: var(--radius-lg);
  --btn-shadow: var(--shadow-sm); --btn-shadow-hover: var(--shadow-md);

  /* Navbar */
  --nav-font-size:  clamp(1.00rem, 0.98rem + 0.15vw, 1.125rem);
  --nav-brand-size: clamp(1.06rem, 1.00rem + 0.22vw, 1.25rem);
}

.container {
  inline-size: min(100% - (var(--_gutter-sm) * 2), var(--container-max, 1200px)) !important;
  margin-inline: auto;
  padding-inline: 0 !important;
}
@media (min-width: 768px) {
  .container { inline-size: min(100% - (var(--_gutter-md) * 2), var(--container-max, 1200px)) !important; }
}
@media (min-width: 1280px) {
  .container { inline-size: min(100% - (var(--_gutter-lg) * 2), var(--container-max, 1200px)) !important; }
}

/* Medios fluidos */
img, svg, video, canvas { max-width: 100%; height: auto; }

/* Links (no afectar .btn ni .nav-link) */
:where(a):not(.btn):not(.nav-link) {
  color: var(--link);
  text-decoration: none;
  transition: color var(--transition);
}
:where(a):not(.btn):not(.nav-link):hover { color: var(--link-hover); }

/* Headings */
h1 { font-size: var(--text-4xl); line-height: 1.1; letter-spacing: -0.02em; }
h2 { font-size: var(--text-3xl); line-height: 1.15; letter-spacing: -0.02em; }
h3 { font-size: var(--text-2xl); line-height: 1.2; }
h4 { font-size: var(--text-xl);  line-height: 1.25; }
h1, h2, h3, h4 { font-weight: 700; }

/* Utils tipográficas */
.h1 { font-size: var(--text-4xl); font-weight: 800; line-height: 1.1; letter-spacing: -0.02em; }
.h2 { font-size: var(--text-3xl); font-weight: 700; line-height: 1.15; letter-spacing: -0.02em; }
.lead { font-size: var(--text-lg); color: var(--color-fg-muted); }

/* Secciones con ritmo consistente */
.section { padding-block: var(--section-y, 4rem); }
@media (min-width: 768px) { .section { padding-block: var(--section-y-lg, 6rem); } }

/* Separador suave entre secciones */
.section + .section {
  border-top: var(--border, 1px) solid var(--color-border);
  background: linear-gradient(180deg, transparent, hsl(var(--neutral-50))) no-repeat;
  background-size: 100% 80px;
  background-position: top;
}

/* Regla horizontal */
.hr { height: 1px; background: var(--color-border); border: 0; margin: var(--space-6) 0; }

/* ===== Botones =========================================================== */
.btn {
  --_bg: var(--color-surface);
  --_fg: var(--color-fg);
  --_bd: var(--color-border);

  display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
  min-height: var(--btn-h); padding-inline: var(--btn-pad-x); padding-block: .625rem;

  background: var(--_bg); color: var(--_fg);
  border: 1px solid var(--_bd); border-radius: var(--btn-radius);
  box-shadow: var(--btn-shadow); font-weight: 600; line-height: 1; cursor: pointer;

  transition: background var(--transition), color var(--transition),
              border-color var(--transition), transform var(--transition-fast),
              box-shadow var(--transition);
}
.btn:hover  { transform: translateY(-1px); box-shadow: var(--btn-shadow-hover); }
.btn:active { transform: translateY(0); }

a.btn, a.btn:hover, a.btn:active, a.btn:focus, a.btn:focus-visible, a.btn:visited {
  color: var(--_fg) !important;
  -webkit-text-fill-color: var(--_fg) !important;
  text-decoration: none !important;
}
.btn :where(span,strong,em,svg,i) { color: inherit !important; fill: currentColor; stroke: currentColor; }

/* Primaria (CTA) */
.btn-primary { --_bg: var(--color-primary); --_fg: var(--color-on-primary); --_bd: transparent; }
.btn-primary:hover  { --_bg: var(--color-primary-600); }
.btn-primary:active { --_bg: var(--color-primary-700); }
.btn-primary,
.btn-primary:hover,
.btn-primary:active,
.btn-primary:focus-visible {
  color: var(--_fg) !important;
  box-shadow: 0 10px 24px color-mix(in oklch, var(--color-primary) 24%, transparent);
}

/* Suave */
.btn-soft { --_bg: color-mix(in oklch, var(--color-primary) 14%, white); --_fg: var(--color-primary); --_bd: transparent; }
.btn-soft:hover  { --_bg: color-mix(in oklch, var(--color-primary) 20%, white); }
.btn-soft:active { --_bg: color-mix(in oklch, var(--color-primary) 26%, white); }
a.btn-soft, a.btn-soft:hover, a.btn-soft:active, a.btn-soft:focus-visible {
  color: var(--_fg) !important;
}

/* Outline */
.btn-outline { --_bg: var(--color-surface); --_fg: var(--color-fg); --_bd: var(--color-border); }
.btn-outline:hover { --_bd: var(--color-primary); --_fg: var(--color-primary); }

/* Tamaños/forma extra para CTAs */
.btn-pill { border-radius: 9999px; }
.btn-lg   { min-height: calc(var(--btn-h) + .5rem); padding-inline: calc(var(--btn-pad-x) + .5rem); }

/* ── Ajustes de botones en DARK ───────────────────── */
[data-theme="dark"] .btn { --_bg: var(--color-surface); --_fg: var(--color-fg); --_bd: var(--color-border); }
[data-theme="dark"] .btn-soft {
  --_bg: color-mix(in oklch, var(--color-primary) 22%, black);
  --_fg:#fff;
}
[data-theme="dark"] .btn-outline:hover { --_bd: var(--color-primary); --_fg: var(--color-primary); }

/* Tarjetas */
.card {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  transition: transform var(--transition), box-shadow var(--transition);
}
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }

/* Navbar links */
#siteHeader nav a { font-size: var(--nav-font-size); }
.nav-link {
  display: inline-flex; align-items: center; height: 2.5rem;
  padding-inline: .75rem; border-radius: .5rem;
  color: var(--color-fg); opacity: .8;
  transition: color .18s ease, opacity .18s ease, background-color .18s ease;
  font-size: var(--nav-font-size); letter-spacing: -0.01em;
}
.nav-link:hover { color: var(--color-primary); opacity: 1; }

#siteHeader [data-brand], #siteHeader .brand, #siteHeader .logo, #siteHeader .site-title {
  font-size: var(--nav-brand-size); font-weight: 700; letter-spacing: -0.015em;
}

#siteHeader nav a.nav-link.nav-active,
#mobileNav     a.nav-link.nav-active {
  color: var(--color-primary) !important; font-weight: 700; text-decoration: none; opacity: 1;
}

/* Focus visible */
:where(a, button, input, textarea, select):focus-visible {
  outline: 2px solid var(--color-ring); outline-offset: 3px; border-radius: var(--radius-sm);
}

/* Motion reduce */
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: .01ms !important; animation-iteration-count: 1 !important;
      transition-duration: .01ms !important; scroll-behavior: auto !important; }
}

/* Scrollbar */
* { scrollbar-width: thin; scrollbar-color: hsl(var(--neutral-300)) transparent; }
*::-webkit-scrollbar { height: 10px; width: 10px; }
*::-webkit-scrollbar-thumb { background: hsl(var(--neutral-300)); border-radius: 10px; }
*::-webkit-scrollbar-track { background: transparent; }

/* Reveal animations */
@media (prefers-reduced-motion: no-preference) {
  .reveal { opacity: 0; transform: translate3d(0,0,0);
    transition: opacity .6s ease, transform .6s cubic-bezier(.22,.61,.36,1), filter .6s ease;
    will-change: opacity, transform, filter; filter: blur(0); }
  .reveal-in { opacity: 1; transform: none; filter: blur(0); }
  .reveal-up{ transform: translateY(16px); }
  .reveal-down{ transform: translateY(-16px); }
  .reveal-left{ transform: translateX(16px); }
  .reveal-right{ transform: translateX(-16px); }
  .reveal-scale{ transform: scale(.96); }
  .reveal-blur{ filter: blur(6px); }
}

/* ===== Background Grid — TOKENS y fallbacks globales ==================== */
:root {
  --grid-line: 1px;
  --grid-size: 26px;
  --grid-color-fallback: rgba(16, 24, 40, .06);
  --grid-vignette-fallback:
    radial-gradient(120% 80% at 50% 0%,
      rgba(0,0,0,0.04) 0%,
      rgba(0,0,0,0.02) 30%,
      rgba(0,0,0,0.00) 60%);
}
/* === NUEVO: color de sombra del hero (coherente con theming) ========== */
:root { --hero-shadow-color: color-mix(in oklch, var(--color-primary) 28%, transparent); }
[data-theme="dark"] {
  --grid-color-fallback: rgba(255,255,255,.06);
  --grid-vignette-fallback:
    radial-gradient(120% 80% at 50% 0%,
      rgba(255,255,255,0.05) 0%,
      rgba(255,255,255,0.025) 30%,
      rgba(255,255,255,0.00) 60%);
  --hero-shadow-color: color-mix(in oklch, var(--color-primary) 18%, transparent);
}
@supports (color: oklch(50% 0 0)) and (background: color-mix(in oklch, white 10%, black)) {
  :root {
    --grid-color: color-mix(in oklch, var(--color-border) 60%, transparent);
    --grid-vignette:
      radial-gradient(120% 80% at 50% 0%,
        color-mix(in oklch, black 4%, transparent) 0%,
        color-mix(in oklch, black 2%, transparent) 30%,
        transparent 60%);
  }
  [data-theme="dark"] {
    --grid-color: color-mix(in oklch, var(--color-border) 45%, transparent);
    --grid-vignette:
      radial-gradient(120% 80% at 50% 0%,
        color-mix(in oklch, white 5%, transparent) 0%,
        color-mix(in oklch, white 2.5%, transparent) 30%,
        transparent 60%);
  }
}

/* ===== Rejilla de PÁGINA ================================================= */
body[data-bg-grid]::before {
  content: "";
  position: fixed; inset: 0;
  z-index: -1; pointer-events: none;

  background-image:
    linear-gradient(to right,  var(--grid-color, var(--grid-color-fallback)) var(--grid-line), transparent var(--grid-line)),
    linear-gradient(to bottom, var(--grid-color, var(--grid-color-fallback)) var(--grid-line), transparent var(--grid-line)),
    var(--grid-vignette, var(--grid-vignette-fallback));

  background-size: var(--grid-size) var(--grid-size), var(--grid-size) var(--grid-size), 100% 100%;
  background-repeat: repeat;
  background-position: top left, top left, top left;

  -webkit-mask-image: radial-gradient(130% 90% at 50% 6%, #000 62%, transparent 92%);
          mask-image: radial-gradient(130% 90% at 50% 6%, #000 62%, transparent 92%);

  opacity: .28;
}

/* ===== Rejilla LOCAL (por sección) ===================================== */
.bg-grid { position: relative; isolation: isolate; }
.bg-grid > * { position: relative; z-index: 1; }
.bg-grid.rounded { overflow: hidden; border-radius: inherit; }

.bg-grid::before {
  content: "";
  position: absolute; inset: 0;
  z-index: 0; pointer-events: none;

  background-image:
    linear-gradient(to right,  var(--grid-color, var(--grid-color-fallback)) var(--grid-line), transparent var(--grid-line)),
    linear-gradient(to bottom, var(--grid-color, var(--grid-color-fallback)) var(--grid-line), transparent var(--grid-line)),
    var(--grid-vignette, var(--grid-vignette-fallback));

  background-size: var(--grid-size) var(--grid-size), var(--grid-size) var(--grid-size), 100% 100%;
  background-repeat: repeat;
  background-position: top left, top left, top left;

  -webkit-mask-image: radial-gradient(130% 90% at 50% 6%, #000 60%, transparent 90%);
          mask-image: radial-gradient(130% 90% at 50% 6%, #000 60%, transparent 90%);

  opacity: .32;
}
.bg-grid.soft::before { opacity: .22; }

/* Spotlight (no se usa en hero) */
.spotlight { position: relative; isolation: isolate; }
.spotlight::after{
  content:""; position:absolute; inset:0; z-index:0; pointer-events:none;
  background: var(--hero-spotlight);
  filter: blur(8px);
}

/* ===== Única sombra/glow azul del hero ================================ */
.visual-floor{
  position:absolute;
  z-index:0;
  pointer-events:none;
  width:140%;
  height:60%;
  left:50%;
  bottom:-10%;
  transform:translateX(-50%);
  background: radial-gradient(68% 40% at 50% 78%, var(--hero-shadow-color) 0%, transparent 70%);
  filter: blur(44px);
  opacity:.26;
}
/* MOBILE: más compacto y recortado para no invadir CTAs ni badges */
@media (max-width: 767px){
  .visual-floor{
    width:125%;
    height:44%;
    bottom:-18%;
    background: radial-gradient(78% 42% at 50% 100%, var(--hero-shadow-color) 0%, transparent 70%);
    filter: blur(24px);
    opacity:.20;
    /* Recorte superior para que no “suba” y no haya corte duro */
    -webkit-mask-image: linear-gradient(to top, #000 58%, transparent 70%);
            mask-image: linear-gradient(to top, #000 58%, transparent 70%);
  }
}
[data-theme="dark"] .visual-floor{ opacity:.20; }

/* Fade inferior para fundir el hero con la siguiente sección */
.hero-fade{
  position:absolute; left:0; right:0; bottom:-1px; height:64px; pointer-events:none; z-index:2;
  background: linear-gradient(to bottom, transparent 0%, var(--color-bg) 85%);
}
@media (min-width:768px){ .hero-fade{ height:72px; } }
[data-theme="dark"] .hero-fade{
  background: linear-gradient(to bottom, transparent 0%, color-mix(in oklch, black 92%, transparent) 85%);
}

/* Chips semánticos */
.chip{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.5rem .75rem; border-radius:9999px; font-size:.875rem;
  color:#0f1226; background:#fff;
  box-shadow: 0 10px 30px rgba(0,0,0,.10), 0 1px 0 rgba(0,0,0,.04);
}
.chip::before{
  content:""; width:.5rem; height:.5rem; border-radius:9999px; display:inline-block;
  box-shadow: 0 0 0 4px color-mix(in oklch, currentColor 20%, white);
}
.chip.blue::before  { background: var(--color-primary);   color: var(--color-primary); }
.chip.green::before { background: var(--color-success);   color: var(--color-success); }
.chip.amber::before { background: var(--color-warning);   color: var(--color-warning); }

.chip--sm{ font-size:.80rem; padding:.4rem .65rem; } /* móvil */

/* ===== HERO — presets =================================================== */
.hero-grid {
  --hero-grid-opacity: .34;
  --hero-grid-mask-y: 6%;
  --hero-grid-hard-stop: 66%;
}
.hero-grid.bg-grid::before {
  opacity: var(--hero-grid-opacity);
  -webkit-mask-image: radial-gradient(130% 90% at 50% var(--hero-grid-mask-y), #000 var(--hero-grid-hard-stop), transparent 92%);
          mask-image: radial-gradient(130% 90% at 50% var(--hero-grid-mask-y), #000 var(--hero-grid-hard-stop), transparent 92%);
}
@media (min-width: 768px) {
  .hero-grid { --grid-size: 24px; }
}

/* Badges: wrap siempre */
.badges-scroller{ display: contents; }
.badges-wrap{ display:flex; flex-wrap:wrap; gap:.5rem; }
.badge-chip{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.5rem .75rem; border-radius:9999px; font-size:.95rem;
  border:1px solid var(--color-border);
  background: var(--color-surface);
  box-shadow: 0 6px 20px rgba(0,0,0,.05);
  white-space: nowrap;
}
.badge-chip svg{ flex:0 0 auto; }
@media (max-width: 767px){
  .badge-chip{ font-size:.9rem; padding:.45rem .7rem; }
}

/* Título/Subtítulo en móvil (más aire inferior para el glow/fade) */
.hero-title{
  font-weight: 800; line-height: 1.08; letter-spacing: -0.02em;
  font-size: clamp(2.05rem, 5.2vw + 0.8rem, 3.5rem);
}
.hero-subtitle{
  max-width: 48rem;
  font-size: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
  line-height: 1.45;
}
@media (max-width: 767px){
  .hero-grid .max-w-7xl{ padding-top: 5.25rem; padding-bottom: 4rem; } /* ↑ antes 3rem */
  .hero-title{ margin-top:.25rem; }
  .badge-row{ margin-top: .35rem; }
}

/* Evita cortes por sombras/rotaciones del visual */
#heroVisual { overflow: visible; }

/* Ajuste leve XL+ */
@media (min-width: 1280px){
  .hero-grid h1{ letter-spacing:-0.02em; }
}
